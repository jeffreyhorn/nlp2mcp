# PATH Solver Requirements

**Status:** PATH solver not currently available (licensing pending)  
**Last Updated:** 2025-11-02

---

## Overview

The PATH solver is a complementarity problem solver that can be used to solve the MCP models generated by nlp2mcp. While nlp2mcp can generate MCP models without PATH, having PATH available enables:
- Validation of generated models
- Testing of reformulated features (min/max, abs, fixed vars)
- Verification of scaling effectiveness
- Performance benchmarking

---

## Requirements

### Software Requirements

1. **GAMS Installation**
   - GAMS 24.0 or later
   - Includes PATH solver by default
   - License required for commercial use

2. **PATH Solver**
   - Included with GAMS installation
   - No separate installation needed
   - Requires active GAMS license

### System Requirements

- Operating System: Windows, Linux, or macOS
- Memory: 4GB minimum, 8GB+ recommended for large models
- Disk: 2GB for GAMS/PATH installation

---

## Installation Steps (When Available)

### 1. Install GAMS

Download from: https://www.gams.com/download/

**Windows:**
```cmd
# Run installer
gams_windows_x64_x.exe

# Add to PATH (if not automatic)
set PATH=%PATH%;C:\GAMS\win64\XX.X
```

**Linux:**
```bash
# Extract archive
tar xzf gams_linux_x64_x.tgz

# Add to PATH
export PATH=$PATH:/opt/gams/gams_XX.X
```

**macOS:**
```bash
# Extract archive
tar xzf gams_macos_x64_x.tgz

# Add to PATH
export PATH=$PATH:/Applications/GAMS_XX.X
```

### 2. Verify Installation

```bash
# Check GAMS version
gams --version

# Check PATH solver availability
gams solver=path
```

### 3. License Setup

Place GAMS license file (`gamslice.txt`) in:
- Windows: `C:\GAMS\win64\XX.X\`
- Linux: `/opt/gams/gams_XX.X/`
- macOS: `/Applications/GAMS_XX.X/`

---

## Validation Workflow (Pending PATH Availability)

### 1. Generate MCP Model

```bash
nlp2mcp input_nlp.gms -o output_mcp.gms
```

### 2. Solve with PATH

```gams
$include output_mcp.gms

* MCP model already defined in output_mcp.gms
Solve mcp_model using MCP;

Display x.l, lambda.l;
```

### 3. Check Solution Status

```gams
* Check model status
if (mcp_model.modelstat = 1,
    display "Optimal solution found";
elseif mcp_model.modelstat = 4,
    display "Infeasible";
else
    display "Other status:", mcp_model.modelstat;
);
```

---

## PATH Solver Options (Reference)

### Common Options

```gams
option mcp = path;

* Convergence tolerance
path.convergence_tolerance = 1e-8;

* Iteration limit
path.iterlim = 10000;

* Output level (0=none, 1=summary, 2=detailed)
path.output = 1;

* Crash method for initial point
path.crash_method = 'pnewton';
```

### When to Adjust Options

**Convergence Issues:**
- Increase `iterlim`
- Tighten `convergence_tolerance`
- Try different `crash_method`

**Numerical Issues:**
- Use nlp2mcp's `--scale auto`
- Check problem conditioning
- Review variable/constraint magnitudes

**Large Models:**
- Reduce `output` level (0 or 1)
- Monitor memory usage
- Consider model decomposition

---

## Known Issues (To Be Verified)

The following require PATH testing (Sprint 4 Unknown):

### Unknown 2.4: PATH Non-Smooth Compatibility
- **Status:** Not yet verified
- **Question:** Does PATH handle min/max reformulations?
- **Test:** Run models with min/max through PATH
- **Expected:** Should work (standard epigraph approach)

### Unknown 3.2: Scaling Application
- **Status:** Not yet verified
- **Question:** Scale NLP or KKT system?
- **Test:** Compare performance with both approaches
- **Decision:** Pending PATH testing

### Unknown 5.1: PATH Nonlinearity Handling
- **Status:** Not yet verified
- **Question:** How does PATH handle highly nonlinear KKT systems?
- **Test:** Run complex nonlinear models
- **Note:** PATH uses globally convergent Newton

### Unknown 5.2: Recommended PATH Options
- **Status:** Not yet verified
- **Question:** What options work best for different problem types?
- **Test:** Systematic option tuning
- **Result:** Document best practices

### Unknown 5.3: PATH Failure Reporting
- **Status:** Not yet verified
- **Question:** How to parse PATH error messages?
- **Test:** Induce various failure modes
- **Result:** Document status codes and solutions

### Unknown 5.4: PATH Initial Points
- **Status:** Not yet verified (low priority)
- **Question:** When are user initial points needed?
- **Test:** Default initialization vs. warm starts
- **Result:** Document when to provide .l values

---

## Troubleshooting (When PATH Available)

### PATH Not Found

**Error:** "Solver PATH not found"

**Solutions:**
1. Verify GAMS installation: `gams --version`
2. Check PATH in solver list: `gams solver=path`
3. Verify license validity
4. Check GAMS PATH environment variable

### License Issues

**Error:** "License expired" or "No license"

**Solutions:**
1. Check `gamslice.txt` location
2. Verify license expiration date
3. Contact GAMS support for renewal

### Solver Fails to Converge

**Symptoms:** modelstat > 2, no solution

**Solutions:**
1. Try nlp2mcp `--scale auto`
2. Check initial values (`.l`)
3. Increase iteration limit
4. Review model formulation

### Numerical Issues

**Symptoms:** "Singular Jacobian" or "Ill-conditioned"

**Solutions:**
1. Use `--stats` to check model size
2. Export Jacobian: `--dump-jacobian jac.mtx`
3. Analyze conditioning
4. Apply scaling: `--scale auto` or `--scale byvar`

---

## Alternative Solvers

While PATH is recommended, other MCP solvers include:

1. **MILES** (commercial)
2. **NLPEC** (nonlinear complementarity)
3. **KNITRO** (with complementarity mode)

Consult solver documentation for MCP support.

---

## References

- GAMS Documentation: https://www.gams.com/latest/docs/
- PATH Solver Paper: Ferris & Munson (2000) "Complementarity problems in GAMS"
- MCP Format: https://www.gams.com/latest/docs/UG_ModelSolve.html#UG_ModelSolve_ModelClassificationOfModels_MCP

---

## Status Summary

| Item | Status | Blocker |
|------|--------|---------|
| GAMS Installation | Pending | License |
| PATH Availability | Pending | License |
| Unknown 2.4 Verification | Pending | PATH access |
| Unknown 3.2 Verification | Pending | PATH access |
| Unknown 5.1-5.4 Verification | Pending | PATH access |
| Validation Test Suite | Ready | PATH access |

**Next Steps:** Acquire GAMS/PATH license to enable validation testing.

---

**End of PATH Requirements Document**
